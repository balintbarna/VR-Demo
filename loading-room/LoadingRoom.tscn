[gd_scene load_steps=13 format=2]

[ext_resource path="res://player/VrPlayerScene.tscn" type="PackedScene" id=1]
[ext_resource path="res://AudioBall.tscn" type="PackedScene" id=2]
[ext_resource path="res://loading-room/Room.gd" type="Script" id=3]
[ext_resource path="res://loading-room/LoadingRoom.gd" type="Script" id=4]
[ext_resource path="res://portal/small-portal/SmallPortal.tscn" type="PackedScene" id=5]

[sub_resource type="PanoramaSky" id=1]

[sub_resource type="Environment" id=2]
background_mode = 1
background_sky = SubResource( 1 )
background_energy = 0.0
ambient_light_energy = 0.0

[sub_resource type="SpatialMaterial" id=3]
albedo_color = Color( 0.92549, 0.901961, 0.513726, 1 )

[sub_resource type="SpatialMaterial" id=4]
roughness = 0.0
clearcoat_enabled = true
clearcoat = 1.0
clearcoat_gloss = 0.5

[sub_resource type="ViewportTexture" id=9]
viewport_path = NodePath("World/Room/LoadingText/Viewport")

[sub_resource type="SpatialMaterial" id=7]
albedo_color = Color( 0.32549, 1, 0.827451, 1 )

[sub_resource type="ViewportTexture" id=8]
viewport_path = NodePath("World/ScaryText/Viewport")

[node name="LoadingRoom" type="Spatial"]
script = ExtResource( 4 )

[node name="StartingPoint" type="Spatial" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.00652, 1.04795 )

[node name="VrOrigin" parent="StartingPoint" instance=ExtResource( 1 )]

[node name="World" type="Spatial" parent="."]

[node name="WorldEnvironment" type="WorldEnvironment" parent="World"]
environment = SubResource( 2 )

[node name="Room" type="Spatial" parent="World"]
script = ExtResource( 3 )

[node name="RoomBox" type="CSGCombiner" parent="World/Room"]
use_in_baked_light = true
use_collision = true

[node name="RoomBox" type="CSGBox" parent="World/Room/RoomBox"]
use_in_baked_light = true
use_collision = true
invert_faces = true
width = 5.0
height = 2.5
depth = 5.0
material = SubResource( 3 )

[node name="LeftWindow" type="CSGCylinder" parent="World/Room/RoomBox"]
transform = Transform( -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, -2.5, 0, 0 )
use_in_baked_light = true
radius = 0.4
height = 0.1
sides = 32

[node name="RightWindow" type="CSGCylinder" parent="World/Room/RoomBox"]
transform = Transform( -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 2.5, 0, 0 )
use_in_baked_light = true
radius = 0.4
height = 0.1
sides = 32

[node name="Floor" type="CSGBox" parent="World/Room"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.25009, 0 )
use_in_baked_light = true
use_collision = true
width = 5.0
height = 0.05
depth = 5.0
material = SubResource( 4 )

[node name="OmniLight" type="OmniLight" parent="World/Room"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.03954, 0 )
shadow_enabled = true

[node name="LoadingText" type="Spatial" parent="World/Room"]

[node name="Viewport" type="Viewport" parent="World/Room/LoadingText"]
size = Vector2( 200, 100 )
transparent_bg = true
hdr = false
disable_3d = true
usage = 0
render_target_v_flip = true
gui_disable_input = true

[node name="Label" type="Label" parent="World/Room/LoadingText/Viewport"]
anchor_right = 1.0
anchor_bottom = 1.0
text = "Loading..."
align = 1
valign = 1
autowrap = true

[node name="Sprite3D" type="Sprite3D" parent="World/Room/LoadingText"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -2 )
use_in_baked_light = true
texture = SubResource( 9 )

[node name="AudioBall" parent="World/Room" instance=ExtResource( 2 )]

[node name="ContinuePortal" parent="World/Room" instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, -1.7 )
portal_name = "Continue"
portal_color = Color( 0, 1, 0.670588, 1 )

[node name="FloatingBox" type="Spatial" parent="World"]

[node name="CSGBox" type="CSGBox" parent="World/FloatingBox"]
transform = Transform( 0.853553, -0.146447, 0.5, 0.5, 0.5, -0.707107, -0.146447, 0.853553, 0.5, -5, 0, 0 )
width = 1.0
height = 1.0
depth = 1.0
material = SubResource( 7 )

[node name="SpotLight" type="SpotLight" parent="World/FloatingBox"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4.14109, -0.0319109, 1.35482 )

[node name="ScaryText" type="Spatial" parent="World"]

[node name="Viewport" type="Viewport" parent="World/ScaryText"]
size = Vector2( 200, 100 )
transparent_bg = true
hdr = false
disable_3d = true
usage = 0
render_target_v_flip = true
gui_disable_input = true

[node name="Label" type="Label" parent="World/ScaryText/Viewport"]
anchor_right = 1.0
anchor_bottom = 1.0
text = "Don't look out!"
align = 1
valign = 1

[node name="Sprite3D" type="Sprite3D" parent="World/ScaryText"]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 5, 0, 0 )
use_in_baked_light = true
modulate = Color( 0.733333, 0.0901961, 0.0901961, 1 )
billboard = 2
double_sided = false
texture = SubResource( 8 )
